<!DOCTYPE html>
<html>
	<head>
		<title>鼠标拖动盒子</title>
		<style type="text/css">
			#div {
				background: red;
				width: 100px;
				height: 100px;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div id="div"></div>
	</body>
	<script type="text/javascript">
		window.onload = function() {
			var oDiv = document.getElementById('div');
			var distX = 0;
			var distY = 0;
			oDiv.onmousedown = function(ev) {
				var oEvent = ev || event;
				distX = oEvent.clientX - oDiv.offsetLeft; //获取边界到鼠标的距离  
				distY = oEvent.clientY - oDiv.offsetTop;
				document.onmousemove = function(ev) {
					var oEvent = ev || event;
					var x = oEvent.clientX - distX;
					var y = oEvent.clientY - distY;
					if (x < 0) {
						x = 0;
					}
					if (y < 0) {
						y = 0;
					}
					if (x > (document.documentElement.clientWidth - oDiv.offsetWidth)) {
						x = document.documentElement.clientWidth - oDiv.offsetWidth;
					}
					oDiv.style.left = x + 'px'; //根据鼠标位置相对定位，得到left，top值  
					oDiv.style.top = y + 'px';
				}
				document.onmouseup = function() {
					document.onmousemove = null;
					document.onmouseup = null;
				}
			}

		}
	</script>

	</body>
</html>
